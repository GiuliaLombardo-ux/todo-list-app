<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>WOW To-Do App</title>
  <style>
    :root{
      --pink1:#ffe6f0; --pink2:#fff0f5;
      --peach1:#ffecd2; --peach2:#fcb69f;
      --green1:#d4fc79; --green2:#96e6a1;
      --brand:#cc2e65; --brandDark:#a3274f;
      --card:#ffffff; --item:#fad6de;
    }


    body{ margin:0; height:100vh; display:flex; justify-content:center; align-items:center;
      background: linear-gradient(135deg,var(--pink1),var(--pink2)); transition: background .5s ease;
      font-family: Georgia, "Times New Roman", serif;
    }
    body.theme-mid { background: linear-gradient(135deg,var(--peach1),var(--peach2)); }
    body.theme-full{ background: linear-gradient(135deg,var(--green1),var(--green2)); }

    .container{
      width: 360px; background: var(--card); border-radius: 18px; padding: 22px;
      box-shadow: 0 16px 40px rgba(0,0,0,.18);
      transform-style: preserve-3d; transition: transform .12s ease;
      will-change: transform;
    }

    h1{ margin:0 0 14px; color: var(--brand); text-align:center; letter-spacing:.5px; }

    .row{ display:flex; gap:8px; }
    .row input{
      flex:1; padding:10px 12px; border:2px solid var(--brand); border-radius:10px; outline:none;
      background:#fff; font-size:15px;
    }
    .row button{
      padding:10px 14px; border:none; border-radius:10px; color:#fff; font-weight:700;
      background: var(--brand); cursor:pointer; transition: transform .2s, background .25s;
    }
    .row button:hover{ background: var(--brandDark); transform: translateY(-1px) scale(1.03); }

    ul{ list-style:none; padding:0; margin:16px 0 0; }

    
    li{
      display:flex; align-items:center; justify-content:space-between;
      gap:10px; background: var(--item); color:#532740;
      padding:10px 12px; border-radius:10px; margin-top:8px;
      opacity:0; transform: translateY(8px);
      animation: enter .45s forwards ease-out;
      box-shadow: 0 4px 10px rgba(204,46,101,.08);
    }
    @keyframes enter { to { opacity:1; transform: translateY(0);} }

    .txt{ flex:1; user-select:none; }

   
    li.completed{ text-decoration: line-through; color: #777; background:#e7e7e7; position:relative; }
    li.completed::after{
      content:"✅"; position:absolute; right:10px; top:50%; transform: translateY(-50%);
      animation: bounce .6s;
    }
    @keyframes bounce{
      0%{ transform: translateY(-50%) scale(.25); }
      50%{ transform: translateY(-50%) scale(1.25); }
      100%{ transform: translateY(-50%) scale(1); }
    }

    .actions{ display:flex; align-items:center; gap:6px; }
    .btn-icon{
      width:30px; height:30px; display:grid; place-items:center; border:none; border-radius:8px;
      background:#ffffffaa; cursor:pointer; transition: transform .15s, background .2s;
    }
    .btn-icon:hover{ transform: scale(1.06); background:#fff; }
    .btn-del{ color:#b00020; }

    
    .hint{ text-align:center; font-size:12px; color:#7a4b62; margin-top:8px; opacity:.8; }
  </style>
</head>
<body>
  <div class="container" id="tilt">
    <h1>✨ My To-Do List ✨</h1>
    <div class="row">
      <input id="taskInput" type="text" placeholder="Add a new task…" />
      <button id="addBtn">Add</button>
    </div>
    <ul id="taskList"></ul>
    <div class="hint">Click on a task to complete it • Press Enter to add • Auto-save enabled</div>
  </div>

 
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script>
    const input = document.getElementById('taskInput');
    const addBtn = document.getElementById('addBtn');
    const list  = document.getElementById('taskList');
    const tilt  = document.getElementById('tilt');

    const KEY = 'wow-todo';
    function save(){ 
      const data = [...list.children].map(li => ({text: li.querySelector('.txt').textContent, done: li.classList.contains('completed')}));
      localStorage.setItem(KEY, JSON.stringify(data));
    }
    function load(){
      try{
        const data = JSON.parse(localStorage.getItem(KEY) || '[]');
        data.forEach(item => addTask(item.text, item.done, /*silentAnim*/ true));
        updateTheme();
      }catch(e){}
    }

 
    function addTask(text, done=false, silentAnim=false){
      if(!text){ return; }

      const li = document.createElement('li');
      if(silentAnim){ li.style.animation = 'none'; } // niente anim su render iniziale
      li.innerHTML = `
        <span class="txt"></span>
        <div class="actions">
          <button class="btn-icon btn-del" title="Delete" aria-label="Delete">✕</button>
        </div>
      `;
      li.querySelector('.txt').textContent = text;

      // toggle complete on text click
      li.addEventListener('click', (e)=>{
        if(e.target.closest('.btn-del')) return; // evita toggle se clicchi delete
        li.classList.toggle('completed');
        if(li.classList.contains('completed')){
          confetti({ particleCount: 80, spread: 70, origin: { y: 0.6 } });
        }
        save(); updateTheme();
      });

      // delete
      li.querySelector('.btn-del').addEventListener('click', ()=>{
        li.style.transition = 'transform .18s ease, opacity .18s ease';
        li.style.transform = 'scale(.92)'; li.style.opacity = '0';
        setTimeout(()=>{ li.remove(); save(); updateTheme(); maybeCelebrateAll(); }, 180);
      });

      if(done) li.classList.add('completed');
      list.appendChild(li);
      if(!silentAnim){ li.style.animation = ''; } // riabilita per aggiunte live
      save(); updateTheme(); maybeCelebrateAll();
    }

    function handleAdd(){
      const text = input.value.trim();
      if(!text) return;
      addTask(text);
      input.value = '';
      input.focus();
    }

    addBtn.addEventListener('click', handleAdd);
    input.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') handleAdd(); });

  
    function updateTheme(){
      const total = list.children.length;
      const completed = [...list.children].filter(li => li.classList.contains('completed')).length;
      const ratio = total === 0 ? 0 : completed / total;

      document.body.classList.remove('theme-mid','theme-full');
      if(ratio === 0){
        // base pink (default)
      }else if(ratio < 1){
        document.body.classList.add('theme-mid');
      }else{
        document.body.classList.add('theme-full');
      }
    }

    // Confetti extra quando completi TUTTO
    function maybeCelebrateAll(){
      const total = list.children.length;
      if(total === 0) return;
      const completed = [...list.children].filter(li => li.classList.contains('completed')).length;
      if(completed === total){
        confetti({ particleCount: 160, spread: 100, ticks: 160, origin: { y: 0.6 } });
      }
    }

  
    let rect = null;
    tilt.addEventListener('mouseenter', ()=>{ rect = tilt.getBoundingClientRect(); });
    tilt.addEventListener('mousemove', (e)=>{
      if(!rect) rect = tilt.getBoundingClientRect();
      const x = (e.clientX - rect.left) / rect.width;   // 0..1
      const y = (e.clientY - rect.top)  / rect.height;  // 0..1
      const rotX = (0.5 - y) * 10; // max 10°
      const rotY = (x - 0.5) * 10;
      tilt.style.transform = `perspective(900px) rotateX(${rotX}deg) rotateY(${rotY}deg)`;
    });
    tilt.addEventListener('mouseleave', ()=>{
      tilt.style.transform = 'perspective(900px) rotateX(0) rotateY(0)';
    });

    // 
    load();
  </script>
</body>
</html>




